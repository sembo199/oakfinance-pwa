/*
 * App Global CSS - SCSS with Theme Support
 * ----------------------------------------------------------------------------
 * OakFinance PWA - Light & Dark Theme Support using SCSS Variables
 */

@use "theme/variables" as *;

/* Core CSS required for Ionic components to work properly */
@use "@ionic/angular/css/core.css";
@use "@ionic/angular/css/normalize.css";
@use "@ionic/angular/css/structure.css";
@use "@ionic/angular/css/typography.css";
@use "@ionic/angular/css/display.css";

/* Optional CSS utils */
@use "@ionic/angular/css/padding.css";
@use "@ionic/angular/css/float-elements.css";
@use "@ionic/angular/css/text-alignment.css";
@use "@ionic/angular/css/text-transformation.css";
@use "@ionic/angular/css/flex-utils.css";

/* Dark Mode - Always enabled for modern look */
// @use "@ionic/angular/css/palettes/dark.always.css";

/* =============================================================================
   OAKFINANCE CUSTOM GLOBAL STYLES
   ============================================================================= */

/* =============================================================================
   BASE STYLES - DARK THEME (DEFAULT)
   ============================================================================= */

ion-content {
  --background: #{$dark-bg-dark};
}

:root[data-theme="light"],
:root.light-theme {
  ion-content {
    --background: #{$light-bg-light};
  }
}

/* =============================================================================
   TYPOGRAPHY
   ============================================================================= */

h1,
h2,
h3,
h4,
h5,
h6 {
  font-weight: $font-weight-semibold;
  color: $dark-text-primary;
}

p {
  color: $dark-text-secondary;
}

:root[data-theme="light"],
:root.light-theme {

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    color: $light-text-primary;
  }

  p {
    color: $light-text-secondary;
  }
}

/* =============================================================================
   CARD STYLES
   ============================================================================= */

ion-card {
  --background: #{$dark-bg-card};
  border-radius: $radius-lg;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  margin: $spacing-md;

  ion-card-header {
    padding: $spacing-md $spacing-md $spacing-sm;
  }

  ion-card-content {
    padding: $spacing-sm $spacing-md $spacing-md;
  }

  ion-card-title {
    font-size: 1.25rem;
    font-weight: $font-weight-semibold;
    color: $dark-text-primary;
  }

  ion-card-subtitle {
    font-size: 0.875rem;
    color: $dark-text-secondary;
    margin-top: $spacing-xs;
  }
}

:root[data-theme="light"],
:root.light-theme {
  ion-card {
    --background: #{$light-bg-card};
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);

    ion-card-title {
      color: $light-text-primary;
    }

    ion-card-subtitle {
      color: $light-text-secondary;
    }
  }
}

/* Modern summary/stats card style */
.oak-stats-card {
  background: linear-gradient(145deg, $dark-bg-card 0%, $dark-bg-card-darker 100%);
  border: 1px solid rgba(255, 255, 255, 0.05);
}

:root[data-theme="light"],
:root.light-theme {
  .oak-stats-card {
    background: linear-gradient(145deg, $light-bg-card 0%, $light-bg-card-darker 100%);
    border: 1px solid rgba(0, 0, 0, 0.06);
  }
}

/* =============================================================================
   LIST STYLES
   ============================================================================= */

ion-list {
  background: transparent;
  padding: 0;

  ion-list-header {
    font-size: 0.75rem;
    font-weight: $font-weight-bold;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    padding: $spacing-md $spacing-md $spacing-sm;
    color: $dark-text-muted;
  }
}

:root[data-theme="light"],
:root.light-theme {
  ion-list ion-list-header {
    color: $light-text-muted;
  }
}

ion-item {
  --background: #{$dark-bg-card};
  --background-hover: #{$dark-bg-elevated};
  --background-activated: #{$dark-bg-elevated};
  --border-color: transparent;
  border-radius: $radius-md;

  ion-label {
    h2 {
      font-weight: $font-weight-medium;
      font-size: 1rem;
      color: $dark-text-primary;
    }

    p {
      font-size: 0.8125rem;
      color: $dark-text-secondary;
    }
  }

  ion-icon[slot="start"] {
    font-size: 1.5rem;
    margin-right: $spacing-md;
    padding: $spacing-sm;
    border-radius: $radius-sm;
    background: rgba(255, 255, 255, 0.05);
  }
}

:root[data-theme="light"],
:root.light-theme {
  ion-item {
    --background: #{$light-bg-card};
    --background-hover: #{$light-bg-elevated};
    --background-activated: #{$light-bg-elevated};

    ion-label {
      h2 {
        color: $light-text-primary;
      }

      p {
        color: $light-text-secondary;
      }
    }

    ion-icon[slot="start"] {
      background: rgba(0, 0, 0, 0.05);
    }
  }
}

// Swipe action styling
ion-item-sliding {
  border-radius: $radius-md;
  margin-bottom: $spacing-md;

  ion-item {
    border-radius: 0;
  }
}



/* =============================================================================
   BADGES
   ============================================================================= */

ion-badge {
  padding: $spacing-xs $spacing-sm;
  border-radius: $radius-sm;
  font-weight: $font-weight-semibold;
  font-size: 0.875rem;

  &[color="success"] {
    background: rgba($oak-green, 0.15);
    color: $dark-success;
  }

  &[color="danger"] {
    background: rgba(229, 115, 115, 0.15);
    color: $dark-danger;
  }

  &[color="warning"] {
    background: rgba($oak-yellow, 0.15);
    color: $dark-warning;
  }

  &[color="primary"] {
    background: rgba($oak-green, 0.15);
    color: $oak-green;
  }
}

:root[data-theme="light"],
:root.light-theme {
  ion-badge {
    &[color="success"] {
      color: $light-success;
    }

    &[color="danger"] {
      color: $light-danger;
    }

    &[color="warning"] {
      color: $light-warning;
    }
  }
}

/* =============================================================================
   TOOLBAR & HEADER
   ============================================================================= */

ion-toolbar {
  --background: #{$dark-bg-dark};
  --border-width: 0;
  --padding-top: #{$spacing-sm};
  --padding-bottom: #{$spacing-sm};

  ion-title {
    font-weight: $font-weight-semibold;
    font-size: 1.125rem;
    letter-spacing: -0.25px;
  }
}

:root[data-theme="light"],
:root.light-theme {
  ion-toolbar {
    --background: #{$light-bg-card};
  }
}

ion-header {
  &::after {
    display: none; // Remove bottom border/shadow
  }
}

/* =============================================================================
   SEGMENT CONTROL
   ============================================================================= */

ion-segment {
  --background: #{$dark-bg-input};
  padding: $spacing-xs;

  ion-segment-button {
    --background: transparent;
    --background-checked: #{$oak-green};
    --color: #{$dark-text-secondary};
    --color-checked: #000000;
    --indicator-color: transparent;
    --border-radius: #{$radius-sm};
    --padding-top: #{$spacing-sm};
    --padding-bottom: #{$spacing-sm};
    min-height: 36px;
    font-weight: $font-weight-medium;
    font-size: 0.875rem;
    text-transform: none;
    letter-spacing: 0;

    &::part(indicator-background) {
      background: transparent;
    }
  }
}

:root[data-theme="light"],
:root.light-theme {
  ion-segment {
    --background: #{$light-bg-input};

    ion-segment-button {
      --color: #{$light-text-secondary};
      --color-checked: #{$dark-text-primary};
    }
  }
}

/* =============================================================================
   TAB BAR
   ============================================================================= */

ion-tab-bar {
  --background: #{$dark-bg-card};
  --border: none;
  height: 60px;
  padding-bottom: env(safe-area-inset-bottom);
  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);

  ion-tab-button {
    --color: #{$dark-text-muted};
    --color-selected: #{$oak-green};

    ion-icon {
      font-size: 1.375rem;
      margin-bottom: $spacing-xs;
    }

    ion-label {
      font-size: 0.6875rem;
      font-weight: $font-weight-medium;
      letter-spacing: 0.25px;
    }

    &.tab-selected {
      ion-icon {
        transform: scale(1.1);
      }
    }
  }
}

:root[data-theme="light"],
:root.light-theme {
  ion-tab-bar {
    --background: #{$light-bg-card};
    box-shadow: 0 -2px 12px rgba(0, 0, 0, 0.08);

    ion-tab-button {
      --color: #{$light-text-muted};
    }
  }
}

/* =============================================================================
   BUTTONS
   ============================================================================= */

ion-button {
  --border-radius: #{$radius-md};
  --padding-top: #{$spacing-md};
  --padding-bottom: #{$spacing-md};
  font-weight: $font-weight-semibold;
  letter-spacing: 0;
  text-transform: none;

  &[expand="block"] {
    margin: $spacing-md;
  }
}

/* FAB Button */
ion-fab-button {
  --background: #{$oak-green};
  --background-activated: #{$dark-green-activated};
  --color: #000000;
  --box-shadow: 0 4px 16px rgba(92, 178, 153, 0.4);

  &:hover {
    --box-shadow: 0 6px 20px rgba(92, 178, 153, 0.5);
  }
}

:root[data-theme="light"],
:root.light-theme {
  ion-fab-button {
    --background-activated: #{$light-green-activated};
    --color: #{$dark-text-primary};
  }
}

/* =============================================================================
   INPUTS & FORMS
   ============================================================================= */

ion-input,
ion-textarea,
ion-select {
  --background: #{$dark-bg-input};
  --color: #{$dark-text-primary};
  --placeholder-color: #{$dark-text-muted};
  --padding-start: #{$spacing-md};
  --padding-end: #{$spacing-md};
  border-radius: $radius-md;
}

:root[data-theme="light"],
:root.light-theme {

  ion-input,
  ion-textarea,
  ion-select {
    --background: #{$light-bg-input};
    --color: #{$light-text-primary};
    --placeholder-color: #{$light-text-muted};
  }
}

ion-checkbox {
  --background: #{$dark-bg-input};
  --background-checked: #{$oak-green};
  --border-color: #{$dark-bg-elevated};
  --border-color-checked: #{$oak-green};
  --checkmark-color: #000000;
  --size: 22px;
  --border-radius: 6px;
}

:root[data-theme="light"],
:root.light-theme {
  ion-checkbox {
    --background: #{$light-bg-input};
    --border-color: #{$light-bg-elevated};
  }
}

/* =============================================================================
   FOOTER
   ============================================================================= */

ion-footer {
  background: $dark-bg-card;
  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);

  &::before {
    display: none; // Remove top border
  }

  ion-toolbar {
    --background: transparent;
  }
}

:root[data-theme="light"],
:root.light-theme {
  ion-footer {
    background: $light-bg-card;
    box-shadow: 0 -2px 12px rgba(0, 0, 0, 0.08);
  }
}

/* =============================================================================
   MODAL * ALERT
   ============================================================================= */

ion-modal {
  --background: #{$dark-bg-dark};
  --border-radius: #{$radius-xl} #{$radius-xl} 0 0;

  ion-toolbar {
    --background: #{$dark-bg-dark};
  }

  ion-content {
    --background: #{$dark-bg-dark};
  }
}

:root[data-theme="light"],
:root.light-theme {
  ion-modal {
    --background: #{$light-bg-card};

    ion-toolbar {
      --background: #{$light-bg-card};
    }

    ion-content {
      --background: #{$light-bg-light};
    }
  }
}

ion-alert {

  .alert-radio-label,
  .alert-checkbox-label {
    color: #{$dark-text-primary} !important;
  }
}

:root[data-theme="light"],
:root.light-theme {

  .alert-radio-label,
  .alert-checkbox-label {
    color: #{$light-text-primary} !important;
  }
}

/* =============================================================================
   EMPTY STATE
   ============================================================================= */

.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: calc(#{$spacing-xl} * 2) $spacing-lg;
  text-align: center;

  ion-icon {
    font-size: 80px;
    color: $dark-text-muted;
    margin-bottom: $spacing-lg;
    opacity: 0.5;
  }

  p {
    font-size: 1.125rem;
    font-weight: $font-weight-medium;
    color: $dark-text-primary;
    margin: $spacing-sm 0;
  }

  ion-text p {
    font-size: 0.875rem;
    color: $dark-text-secondary;
    margin: $spacing-xs 0;
  }
}

:root[data-theme="light"],
:root.light-theme {
  .empty-state {
    ion-icon {
      color: $light-text-muted;
    }

    p {
      color: $light-text-primary;
    }

    ion-text p {
      color: $light-text-secondary;
    }
  }
}

/* =============================================================================
   UTILITY CLASSES
   ============================================================================= */


/* Currency/Amount display helpers */
.amount-positive {
  color: $dark-success;
  font-weight: $font-weight-semibold;

  &::before {
    content: '+';
  }
}

.amount-negative {
  color: $dark-danger;
  font-weight: $font-weight-semibold;

  &::before {
    content: '-';
  }
}

:root[data-theme="light"],
:root.light-theme {
  .amount-positive {
    color: $light-success;
  }

  .amount-negative {
    color: $light-danger;
  }
}

/* =============================================================================
   ANIMATIONS
   ============================================================================= */

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-out;
}

/* Subtle pulse animation for important values */
@keyframes pulse {

  0%,
  100% {
    transform: scale(1);
  }

  50% {
    transform: scale(1.02);
  }
}

.animate-pulse {
  animation: pulse 2s ease-in-out infinite;
}
